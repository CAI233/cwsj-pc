<nz-layout class="main-page-layout">
  <nz-header class="main-page-header">
      <nz-breadcrumb>
          <nz-breadcrumb-item>
              <a href="#/home">首页</a>
          </nz-breadcrumb-item>
          <nz-breadcrumb-item>
              会员管理
          </nz-breadcrumb-item>
      </nz-breadcrumb>
  </nz-header>
  <nz-content class="main-page-content">
    <nz-table #nzTable  nzShowSizeChanger [nzShowTotal]="true" [nzAjaxData]="data" [nzLoading]="_loading" [nzPageSize]="param.pageSize"
    [nzPageIndex]="param.pageNum" [nzTotal]="param.total" (nzPageIndexChangeClick)="param.pageNum=$event;load($event)"
    (nzPageSizeChange)="param.pageNum=1;param.pageSize=$event;load($event)">
      <thead nz-thead>
      <tr>
        <th nz-th nzCheckbox>
          <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)">
          </label>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>客户头像</span>
        </th>
        <th nz-th [nzWidth]="'20%'">
            <span>微信账号</span>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>昵称</span>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>性别</span>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>关注（公共号）时间</span>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>邮箱</span>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>会员等级</span>
        </th>
        <th nz-th [nzWidth]="'10%'">
            <span>账号状态</span>
        </th>
        <th nz-th [nzWidth]="'20%'">
            <span>操作</span>
        </th>
      </tr>
      </thead>
      <tbody nz-tbody>
        <tr nz-tbody-tr *ngFor="let data of nzTable.data">
          <td nz-td nzCheckbox>
            <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="_refreshStatus($event)">
            </label>
          </td>
          <td nz-td nz-row>
            <div nz-col [nzSpan]="20" style="float:left;border:1px #ddd dashed;height:60px;margin-bottom:15px;background: #f5f8fa;">
                <img src="{{service.ctxPath + data.goods_cover_small}}" alt="" style="float:left;width:100%;height:100%;">
            </div>
          </td>
          <td nz-td>
              <span>{{data.openid}}</span>
          </td>
          <td nz-td>
              <span>{{data.nick_name}}</span>
          </td>
          <td nz-td>
              <span>{{['男','女'][data.sex-1]}}</span>
          </td>
          <td nz-td>
              <span>{{data.valid_start_time}}</span>
          </td>
          <td nz-td>
              <span>{{data.email}}</span>
          </td>
          <td nz-td>
              <span>{{data.vip_id}}</span>
          </td>
          <td nz-td>
              <nz-switch [ngModel]="data.enabled == 1" (click)="_enabled(data)"></nz-switch>
          </td>
          <td nz-td>
            <span *ngIf="this.service.validataAction('cw_member_list_edit')">
              <a (click)="edit(data)">修改</a>
              <span nz-table-divider></span>
            </span>
            <span *ngIf="this.service.validataAction('cw_member_list_del')">
                <nz-popconfirm [nzTitle]="'确定取消吗?'" (nzOnConfirm)="del(data)">
                  <a nz-popconfirm>删除</a>
                </nz-popconfirm>
            </span>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </nz-content>
</nz-layout>