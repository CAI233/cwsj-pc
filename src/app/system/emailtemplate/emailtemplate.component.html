<nz-layout class="main-page-layout">
  <nz-header class="main-page-header">
    <nz-breadcrumb>
      <nz-breadcrumb-item>
        <a href="#/home">首页</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        邮件模板
      </nz-breadcrumb-item>
    </nz-breadcrumb>
  </nz-header>
  <nz-content class="main-page-content" style="padding-top: 20px;">
    <!-- <form nz-form>
      <div nz-row nz-form-item>
        <div class="row-actions">
          <button nz-button nzType="primary" (click)="add()">
              <i class="anticon anticon-plus"></i>
              <span>新增</span>
          </button>
        </div>
      </div>
    </form> -->

    <nz-table #nzTable [nzDataSource]="data" [nzPageSize]="10" (nzDataChange)="_displayDataChange($event)">
        <thead nz-thead>
        <tr>
          <th nz-th nzCheckbox>
            <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate" (ngModelChange)="_checkAll($event)">
            </label>
          </th>
          <th nz-th [nzWidth]="'15%'"><span>模板编码</span></th>
          <th nz-th [nzWidth]="'50%'"><span>模板内容</span></th>
          <th nz-th [nzWidth]="'15%'"><span>更新时间</span></th>
          <th nz-th><span>操作</span></th>
        </tr>
        </thead>
        <tbody nz-tbody>
        <tr nz-tbody-tr *ngFor="let data of nzTable.data">
          <td nz-td nzCheckbox>
            <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="_refreshStatus($event)">
            </label>
          </td>
          <td nz-td>
              <span *ngIf="editRow!=data.user_id" [innerHtml]="data.mail_template_id"></span>
              <span *ngIf="editRow==data.user_id">
                <nz-input [(ngModel)]="data.mail_template_id" style="width:100%;"></nz-input>
              </span>
          </td>
          <td nz-td>
              <span *ngIf="editRow!=data.user_id" [innerHtml]="data.content"></span>
              <span *ngIf="editRow==data.user_id">
                <nz-input [(ngModel)]="data.content" [nzType]="'textarea'" style="width:100%;" [nzSize]="'large'" [nzRows]="5"></nz-input>
              </span>
              <!-- <span [innerHtml]="data.flag==1 ? '云片' : '阿里'"></span> -->
          </td>
          <td nz-td>
              <span >{{data.update_time}}</span>
          </td>
          <td nz-td>
            <span *ngIf="editRow!=data.user_id">
              <a (click)="edit(data)">修改</a>
            </span>
            <span *ngIf="editRow==data.user_id">
              <a (click)="save(data)">保存</a>
              <span nz-table-divider></span>
                <nz-popconfirm [nzTitle]="'确定取消吗?'" (nzOnConfirm)="cancel(data)">
                  <a nz-popconfirm>取消</a>
                </nz-popconfirm>
            </span>
            <span >
                <nz-popconfirm [nzTitle]="'确定取消吗?'" (nzOnConfirm)="del(data)">
                  <a nz-popconfirm>删除</a>
                </nz-popconfirm>
            </span>
          </td>
        </tr>
        </tbody>
      </nz-table>

  </nz-content>
</nz-layout>